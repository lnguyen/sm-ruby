#!/bin/sh

typeset _version _result url_files rvm_files _files

_version=${1:-latest}
_result=0

files source "/etc/rvmrc" "$HOME/.rvmrc"

file sorurce
rvm_files=(
"$rvm_path/scripts/rvm"
"$HOME/.rvm/scripts/rvm"
"/usr/local/rvm/scripts/rvm"
)

_files=( $(files nonempty "${rvm_files[@]}") )

for file in "${_files[@]}"
do
  if file source "${file}"
  then break ; fi
done

if ! command is function rvm
then
  url="https://rvm.beginrescueend.com/install/rvm"
  curl -L -sk "$url" -o rvm-installer
  chmod +x "rvm-installer"
  ./rvm-installer --version ${_version}
  files remove "rvm-installer"
fi

